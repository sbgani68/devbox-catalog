tasks:

  - name: EnableWSLFeature
    type: ~/powershell
    displayName: "Enable WSL Feature"
    parameters:
      script: C:\ProgramData\Microsoft\DevBoxAgent\ImageDefinition...1\win11-24h2-ent-m365-wsl2-ubuntu\scripts\EnableWSL_Feature.ps1
    runAs: system

  - name: RebootAfterWSL
    type: ~/powershell
    displayName: "Reboot Dev Box (Force)"
    parameters:
      script: C:\ProgramData\Microsoft\DevBoxAgent\ImageDefinition...vp_1.1\win11-24h2-ent-m365-wsl2-ubuntu\scripts\Devbox_Reboot.ps1
    runAs: system

  - name: InstallWSL
    type: ~/powershell
    displayName: "Install WSL"
    parameters:
      script: C:\ProgramData\Microsoft\DevBoxAgent\ImageDefinition..._mvp_1.1\win11-24h2-ent-m365-wsl2-ubuntu\scripts\Install_WSL.ps1
    runAs: system

  - name: InstallUbuntu2404
    type: ~/powershell
    displayName: "Install Ubuntu 24.04"
    parameters:
      script: C:\ProgramData\Microsoft\DevBoxAgent\ImageDefinition...-24h2-ent-m365-wsl2-ubuntu\scripts\Install_Ubuntu_2404.ps1
    runAs: system

  - name: RemoveMSStore
    type: ~/powershell
    displayName: "Remove Microsoft Store"
    parameters:
      script: C:\ProgramData\Microsoft\DevBoxAgent\ImageDefinition...p_1.1\win11-24h2-ent-m365-wsl2-ubuntu\scripts\Remove_MSStore.ps1
    runAs: system

  - name: SetUACPolicy
    type: ~/powershell
    displayName: "Set UAC Policy"
    parameters:
      script: C:\ProgramData\Microsoft\DevBoxAgent\ImageDefinition...1\win11-24h2-ent-m365-wsl2-ubuntu\scripts\UAC_Policy_Default.ps1
    runAs: system

  - name: RebootFinal
    type: ~/powershell
    displayName: "Reboot Dev Box (Force)"
    parameters:
      script: C:\ProgramData\Microsoft\DevBoxAgent\ImageDefinition...vp_1.1\win11-24h2-ent-m365-wsl2-ubuntu\scripts\Devbox_Reboot.ps1
    runAs: system
