$schema: "1.0"
name: "Win11-24H2-Ent-M365-WSL2-Ubuntu"
image: "microsoftwindowsdesktop_windows-ent-cpc_win11-24h2-ent-cpc-m365"

tasks:
  # ---- Tools ----
  - name: ~/winget
    parameters:
      package: Git.Git

  - name: ~/winget
    parameters:
      package: Microsoft.VisualStudioCode

  - name: ~/winget
    parameters:
      package: Docker.DockerDesktop

  - name: ~/winget
    parameters:
      package: Microsoft.WindowsTerminal

  - name: ~/winget
    parameters:
      package: SlackTechnologies.Slack

  # ---- Team PowerShell scripts ----
  - name: ~/powershell
    parameters:
      command: |
        powershell.exe -NoProfile -ExecutionPolicy Bypass -File scripts\Enable_WSL.ps1

  - name: ~/powershell
    parameters:
      command: |
        powershell.exe -NoProfile -ExecutionPolicy Bypass -File scripts\Install_Ubuntu2204.ps1

  - name: ~/powershell
    parameters:
      command: |
        powershell.exe -NoProfile -ExecutionPolicy Bypass -File scripts\UAC_Policy_Default.ps1

  - name: ~/powershell
    parameters:
      command: |
        powershell.exe -NoProfile -ExecutionPolicy Bypass -File scripts\Remove_MSStore_CurrentUser.ps1

userTasks:
  - name: ~/powershell
    parameters:
      command: |
        powershell.exe -NoProfile -ExecutionPolicy Bypass -File scripts\User_Validation.ps1
